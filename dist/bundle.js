(()=>{"use strict";var t=function(){function t(t,e,i,s,n){this.x=t,this.y=e,this.width=i,this.height=s,this.color=n}return t.prototype.render=function(t){t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height)},t}();const e=t;var i,s=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}),n=function(t){function e(e,i,s,n,o,r,h){void 0===r&&(r="#FFD700"),void 0===h&&(h=5);var a=t.call(this,e,i,2*s,2*s,r)||this;return a.radius=s,a.dx=n,a.dy=o,a.baseSpeed=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),a.maxSpeed=h,a}return s(e,t),e.prototype.move=function(){this.x+=this.dx,this.y+=this.dy},e.prototype.increaseSpeed=function(t){var e=1+.001*t,i=Math.min(this.maxSpeed,this.baseSpeed*e),s=Math.atan2(this.dy,this.dx);this.dx=i*Math.cos(s),this.dy=i*Math.sin(s)},e.prototype.bounceOffPaddle=function(t){var e=(this.x-(t.x+t.width/2))/(t.width/2);if(Math.abs(e)<.2)this.dy=-Math.abs(this.dy);else{var i=e*(Math.PI/3),s=Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2));this.dx=s*Math.cos(i),this.dy=-Math.abs(s*Math.sin(i))}return!0},e}(e);const o=n;var r=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),h=function(t){function e(e,i,s,n,o,r){void 0===r&&(r="#40E0D0");var h=t.call(this,e,i,s,n,r)||this;return h.speed=7,h.rightPressed=!1,h.leftPressed=!1,h.canvas=o,document.addEventListener("keydown",(function(t){return h.handleKeyDown(t)})),document.addEventListener("keyup",(function(t){return h.handleKeyUp(t)})),h.canvas.addEventListener("mousemove",(function(t){return h.handleMouseMove(t)})),h}return r(e,t),e.prototype.handleKeyDown=function(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!0)},e.prototype.handleKeyUp=function(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!1)},e.prototype.handleMouseMove=function(t){var e=t.clientX-this.canvas.offsetLeft;e>0&&e<this.canvas.width&&(this.x=e-this.width/2)},e.prototype.move=function(){this.rightPressed?this.x=Math.min(this.x+this.speed,this.canvas.width-this.width):this.leftPressed&&(this.x=Math.max(this.x-this.speed,0))},e}(e);const a=h;var c=function(){function t(t,e){this.color1=t,this.color2=e}return t.prototype.render=function(t,e){var i=t.createRadialGradient(e.width/2,e.height/2,50,e.width/2,e.height/2,e.width);i.addColorStop(0,this.color1),i.addColorStop(1,this.color2),t.fillStyle=i,t.fillRect(0,0,e.width,e.height)},t}();const u=c;var d=function(){function t(t,e,i,s,n){void 0===i&&(i="#0095DD"),void 0===s&&(s="16px Arial"),void 0===n&&(n=0),this.x=t,this.y=e,this.color=i,this.font=s,this.score=n}return t.prototype.update=function(t){this.score+=t},t.prototype.reset=function(){this.score=0},t.prototype.render=function(t){t.font=this.font,t.fillStyle=this.color,t.fillText("Score: ".concat(this.score),this.x,this.y)},t}();const l=d;var p=function(){function t(t,e,i,s,n){void 0===i&&(i="#0095DD"),void 0===s&&(s="16px Arial"),void 0===n&&(n=3),this.x=t,this.y=e,this.color=i,this.font=s,this.lives=n}return t.prototype.loseLife=function(){this.lives-=1},t.prototype.reset=function(){this.lives=3},t.prototype.render=function(t){t.font=this.font,t.fillStyle=this.color,t.fillText("Lives: ".concat(this.lives),this.x,this.y)},t}();const f=p;var y=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();const v=function(t){function e(e,i,s,n,o,r){void 0===r&&(r=!0);var h=t.call(this,e,i,s,n,o)||this;return h.status=r,h}return y(e,t),e}(e);var w=function(){function t(t,e,i,s,n,o,r,h){var a=this;this.ball=t,this.paddle=e,this.bricks=i,this.score=s,this.lives=n,this.sounds=o,this.canvas=r,this.ctx=h,this.isGameOver=!1,this.isPaused=!1,document.addEventListener("keydown",(function(t){return a.handlePause(t)})),this.sounds.startBackgroundMusic(),this.flatBricks=this.bricks.flat()}return t.prototype.handlePause=function(t){"p"!==t.key&&"P"!==t.key||(this.isPaused=!this.isPaused,this.isPaused?this.sounds.stopBackgroundMusic():this.sounds.startBackgroundMusic())},t.prototype.checkGameOver=function(){this.isPaused||this.isGameOver||this.ball.y+this.ball.dy>this.canvas.height-this.ball.radius&&(this.ball.bounceOffPaddle(this.paddle)?this.sounds.play("paddleHit"):(this.lives.loseLife(),this.sounds.play("ballMiss"),0===this.lives.lives?(this.sounds.stopBackgroundMusic(),this.sounds.play("gameOver"),this.isGameOver=!0,alert("GAME OVER")):this.resetBall()))},t.prototype.resetBall=function(){this.ball.x=this.paddle.x+this.paddle.width/2,this.ball.y=this.paddle.y-this.ball.radius-5,this.ball.dx=2*(Math.random()<.5?1:-1),this.ball.dy=-2},t.prototype.collisionDetection=function(){var t=this,e=!1;this.flatBricks.forEach((function(i){i.status&&t.ball.x>i.x&&t.ball.x<i.x+i.width&&t.ball.y>i.y&&t.ball.y<i.y+i.height&&(t.ball.dy=-t.ball.dy,i.status=!1,t.score.update(10),e=!0)})),e&&(this.ball.increaseSpeed(this.score.score),this.sounds.play("brickHit"))},t.prototype.checkWinCondition=function(){this.flatBricks.every((function(t){return!t.status}))&&(this.sounds.play("win"),alert("YOU WIN!"),this.isGameOver=!0)},t.prototype.loseLife=function(){this.lives.loseLife()},t.prototype.reset=function(){this.lives.reset()},t.prototype.render=function(){this.ctx.font="16px Arial",this.ctx.fillStyle="#0095DD",this.ctx.fillText("Lives: ".concat(this.lives.lives),this.canvas.width-65,20)},t}();const x=w,b=function(){function t(){this.sounds={brickHit:new Audio("assets/sounds/brick-hit.mp3"),paddleHit:new Audio("assets/sounds/paddle-hit.mp3"),gameOver:new Audio("assets/sounds/game-over.mp3"),ballMiss:new Audio("assets/sounds/ball-miss.mp3"),win:new Audio("assets/sounds/win.mp3"),backgroundMusic:new Audio("assets/sounds/background-music.mp3")},this.sounds.backgroundMusic.loop=!0,this.sounds.backgroundMusic.volume=.3}return t.prototype.play=function(t){this.sounds[t]&&(this.sounds[t].pause(),this.sounds[t].currentTime=0,this.sounds[t].play())},t.prototype.startBackgroundMusic=function(){this.sounds.backgroundMusic.play()},t.prototype.stopBackgroundMusic=function(){this.sounds.backgroundMusic.pause()},t}();var m=document.getElementById("myCanvas"),g=m.getContext("2d"),k=new o(m.width/2,m.height-30,10,2,-2,"#FFD700",5),M=new a((m.width-75)/2,m.height-10,75,10,m),O=new u("#8A2BE2","#000000"),P=new l(8,20),_=new f(m.width-65,20),A=new b,L=(m.width-60-70)/8,E=Array.from({length:8},(function(t,e){return Array.from({length:5},(function(t,i){return new v(e*(L+10)+30,30*i+30,L,20,["#FF5733","#33FF57","#3357FF","#FFD700","#FF69B4"][i%5])}))})),S=new x(k,M,E,P,_,A,m,g);document.addEventListener("keydown",(function(t){return M.handleKeyDown(t)})),document.addEventListener("keyup",(function(t){return M.handleKeyUp(t)})),document.addEventListener("mousemove",(function(t){return M.handleMouseMove(t)})),function t(){g.clearRect(0,0,m.width,m.height),O.render(g,m),M.render(g),k.render(g),P.render(g),_.render(g),E.flat().forEach((function(t){return t.render(g)})),(k.x+k.dx>m.width-k.radius||k.x+k.dx<k.radius)&&(k.dx=-k.dx),k.y+k.dy<k.radius&&(k.dy=-k.dy),S.checkGameOver(),k.bounceOffPaddle(M)&&A.play("paddleHit"),k.move(),M.move(),S.collisionDetection(),S.checkWinCondition(),requestAnimationFrame(t)}()})();